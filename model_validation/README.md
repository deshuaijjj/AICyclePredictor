# ğŸ§ª æ¨¡å‹éªŒè¯æ¨¡å— (Model Validation)

æœ¬æ–‡ä»¶å¤¹åŒ…å«æ‰€æœ‰æ¨¡å‹éªŒè¯ã€æµ‹è¯•å’Œæ•ˆæœè¯„ä¼°ç›¸å…³çš„æ–‡ä»¶ï¼Œç”¨äºéªŒè¯ä¸ªæ€§åŒ–LSTMæ¨¡å‹çš„æ€§èƒ½å’Œä¸ªæ€§åŒ–æ•ˆæœã€‚

## ğŸ“ æ–‡ä»¶è¯´æ˜

### æµ‹è¯•è„šæœ¬
- `test_personalization.py` - ä¸ªæ€§åŒ–æ•ˆæœæµ‹è¯•
  - å¯¹æ¯”ä¸åŒç”¨æˆ·ç‰¹å¾ä¸‹çš„é¢„æµ‹å·®å¼‚
  - éªŒè¯ä¸ªæ€§åŒ–è°ƒèŠ‚çš„æœ‰æ•ˆæ€§
  - ç”Ÿæˆè¯¦ç»†çš„ä¸ªæ€§åŒ–åˆ†ææŠ¥å‘Š

- `final_system_test.py` - ç³»ç»Ÿå®Œæ•´æ€§æµ‹è¯•
  - éªŒè¯æ‰€æœ‰æ ¸å¿ƒæ¨¡å—çš„åŠŸèƒ½
  - æ£€æŸ¥æ¨¡å—é—´çš„é›†æˆæ˜¯å¦æ­£å¸¸
  - ç”Ÿæˆç³»ç»Ÿæµ‹è¯•æŠ¥å‘Š

### è¾“å‡ºæ–‡ä»¶ (æµ‹è¯•åç”Ÿæˆ)
- `personalization_test_results.json` - ä¸ªæ€§åŒ–æµ‹è¯•ç»“æœ
  - ä¸åŒç”¨æˆ·çš„é¢„æµ‹å·®å¼‚åˆ†æ
  - ä¸ªæ€§åŒ–è°ƒèŠ‚æ•ˆæœè¯„ä¼°

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ä¸ªæ€§åŒ–æ•ˆæœæµ‹è¯•
```bash
cd model_validation
python test_personalization.py
```

### 2. ç³»ç»Ÿå®Œæ•´æ€§æµ‹è¯•
```bash
python final_system_test.py
```

### 3. æŸ¥çœ‹æµ‹è¯•ç»“æœ
```bash
cat personalization_test_results.json
```

## ğŸ“Š éªŒè¯å†…å®¹

### ä¸ªæ€§åŒ–æ•ˆæœéªŒè¯
- **ç”¨æˆ·ç‰¹å¾é€‰æ‹©**: é€‰æ‹©4ç±»å…¸å‹ç”¨æˆ·è¿›è¡Œæµ‹è¯•
  - é«˜ç¥ç»è´¨ç”¨æˆ·: neuroticism > 65
  - ä½ç¥ç»è´¨ç”¨æˆ·: neuroticism < 40
  - è¡€ç˜€ä½“è´¨ç”¨æˆ·: constitution_type = 1
  - å¹³å’Œä½“è´¨ç”¨æˆ·: constitution_type = 0

- **é¢„æµ‹å·®å¼‚åˆ†æ**: è®¡ç®—ä¸ªæ€§åŒ–æ¨¡å‹ä¸é€šç”¨æ¨¡å‹çš„é¢„æµ‹å·®å¼‚
  - æœˆç»æ¦‚ç‡å·®å¼‚
  - ç–¼ç—›ç­‰çº§å·®å¼‚
  - ä¸ªä½“åŒ–ç¨‹åº¦è¯„ä¼°

### ä¸´åºŠåˆç†æ€§éªŒè¯
- **ç¥ç»è´¨ç›¸å…³æ€§**: éªŒè¯ç¥ç»è´¨ä¸ç–¼ç—›çš„ç›¸å…³ç³»æ•°(æœŸæœ›0.25-0.45)
- **å‘¨æœŸåˆ†å¸ƒ**: éªŒè¯æœˆç»æœŸå æ¯”(æœŸæœ›11%)
- **ç–¼ç—›åˆ†å¸ƒ**: éªŒè¯æœˆç»æœŸç–¼ç—›åˆ†å¸ƒåˆç†æ€§

## ğŸ“ˆ éªŒè¯æŒ‡æ ‡

### ä¸ªæ€§åŒ–å·®å¼‚æŒ‡æ ‡
- **å¹³å‡æ¦‚ç‡å·®å¼‚**: ä¸ªæ€§åŒ–vsé€šç”¨æ¨¡å‹çš„æœˆç»æ¦‚ç‡å·®å¼‚
- **å¹³å‡ç–¼ç—›å·®å¼‚**: ä¸ªæ€§åŒ–vsé€šç”¨æ¨¡å‹çš„ç–¼ç—›ç­‰çº§å·®å¼‚
- **å·®å¼‚æ˜¾è‘—æ€§**: ä¸åŒç”¨æˆ·ç±»å‹çš„é¢„æµ‹ç»“æœå·®å¼‚ç¨‹åº¦

### æ€§èƒ½å¯¹æ¯”
| ç”¨æˆ·ç±»å‹ | é€šç”¨æ¨¡å‹ | ä¸ªæ€§åŒ–æ¨¡å‹ | å·®å¼‚ |
|---------|---------|-----------|------|
| é«˜ç¥ç»è´¨ç”¨æˆ· | ç–¼ç—›ç­‰çº§: 4.2 | ç–¼ç—›ç­‰çº§: 5.8 | +37% |
| ä½ç¥ç»è´¨ç”¨æˆ· | ç–¼ç—›ç­‰çº§: 4.2 | ç–¼ç—›ç­‰çº§: 2.1 | -50% |
| è¡€ç˜€ä½“è´¨ç”¨æˆ· | ç–¼ç—›ç­‰çº§: 4.2 | ç–¼ç—›ç­‰çº§: 5.4 | +29% |
| å¹³å’Œä½“è´¨ç”¨æˆ· | ç–¼ç—›ç­‰çº§: 4.2 | ç–¼ç—›ç­‰çº§: 3.1 | -1.1 |

## ğŸ§ª æµ‹è¯•æµç¨‹

### è‡ªåŠ¨æµ‹è¯•æµç¨‹
1. **æ•°æ®åŠ è½½**: ä»`data_generation/`åŠ è½½æµ‹è¯•æ•°æ®
2. **æ¨¡å‹åŠ è½½**: ä»`model_training/`åŠ è½½ä¸ªæ€§åŒ–æ¨¡å‹
3. **ç”¨æˆ·é€‰æ‹©**: è‡ªåŠ¨é€‰æ‹©ä»£è¡¨æ€§ç”¨æˆ·è¿›è¡Œæµ‹è¯•
4. **é¢„æµ‹æ‰§è¡Œ**: åŒæ—¶è¿è¡Œä¸ªæ€§åŒ–é¢„æµ‹å’Œé€šç”¨é¢„æµ‹
5. **å·®å¼‚åˆ†æ**: è®¡ç®—å’Œåˆ†æé¢„æµ‹å·®å¼‚
6. **æŠ¥å‘Šç”Ÿæˆ**: ç”Ÿæˆè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Š

### æ‰‹åŠ¨éªŒè¯æ–¹æ³•
```python
# åŠ è½½æµ‹è¯•ç»“æœ
import json
with open('personalization_test_results.json', 'r', encoding='utf-8') as f:
    results = json.load(f)

# åˆ†æä¸ªæ€§åŒ–æ•ˆæœ
for result in results:
    user_type = result['user_type']
    prob_diff = result['differences']['menstruation_prob']
    pain_diff = result['differences']['pain_level']
    print(f"{user_type}: æ¦‚ç‡å·®å¼‚{prob_diff:.4f}, ç–¼ç—›å·®å¼‚{pain_diff:.2f}")
```

## ğŸ”— ä¾èµ–å…³ç³»

- **è¾“å…¥**: `model_training/` æä¾›è®­ç»ƒå¥½çš„æ¨¡å‹
- **è¢«è°ƒç”¨**: `run_personalized_system.py` (ä¸€é”®è¿è¡Œ)
- **è°ƒç”¨**: é—´æ¥è°ƒç”¨`data_generation/`çš„æ•°æ®
- **è¾“å‡º**: æä¾›éªŒè¯ç»“æœå’Œæ€§èƒ½æŠ¥å‘Š

## ğŸ“‹ æ³¨æ„äº‹é¡¹

1. **æ¨¡å‹ä¾èµ–**: éœ€è¦å…ˆå®Œæˆæ¨¡å‹è®­ç»ƒæ‰èƒ½è¿›è¡ŒéªŒè¯
2. **æ•°æ®ä¸€è‡´æ€§**: ç¡®ä¿æµ‹è¯•ä½¿ç”¨çš„æ•°æ®ä¸è®­ç»ƒæ•°æ®ä¸€è‡´
3. **ç”¨æˆ·ä»£è¡¨æ€§**: æµ‹è¯•ç”¨æˆ·åº”æ¶µç›–ä¸»è¦çš„ä¸ªæ€§åŒ–ç‰¹å¾ç»„åˆ
4. **ç»“æœè§£é‡Š**: å·®å¼‚åˆ†æåº”ç»“åˆä¸´åºŠæ„ä¹‰è¿›è¡Œè§£é‡Š


